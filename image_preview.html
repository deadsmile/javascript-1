<html>
<body>
    <input type="file" id="file" /><br>
    <img src="" id="preview" />
    <script type="text/javascript">
    var f = document.getElementById('file'),
        preview = document.getElementById('preview');
        
        function convertImgToBase64(url, callback, outputFormat){
            var canvas = document.createElement('CANVAS'),
                ctx = canvas.getContext('2d'),
                img = preview;
            img.crossOrigin = 'Anonymous';
            img.onload = function(){
                canvas.height = img.height;
                canvas.width = img.width;
                ctx.drawImage(img,0,0);
                var dataURL = canvas.toDataURL(outputFormat || 'image/png');
                callback.call(this, dataURL);
                canvas = null; 
            };
            img.src = url;
        }
        
    f.onchange = function() {
        convertImgToBase64(this.value);
    };
    </script>
</body>
</html>
